<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz</title>
</head>
<body>
  <form id="quizForm">
    <ul id="questionsList"></ul>
    <button type="submit">Submit</button>
  </form>
  <p id="score"></p>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const questions = [
        {
          question: "What is the capital of France?",
          options: ["Paris", "London", "Berlin", "Madrid"],
          correctAnswer: "Paris"
        },
        {
          question: "What is the largest mammal?",
          options: ["Elephant", "Blue Whale", "Giraffe", "Hippopotamus"],
          correctAnswer: "Blue Whale"
        },
        {
          question: "Which planet is known as the Red Planet?",
          options: ["Mars", "Venus", "Jupiter", "Saturn"],
          correctAnswer: "Mars"
        },
        {
          question: "Who wrote 'Romeo and Juliet'?",
          options: ["William Shakespeare", "Jane Austen", "Charles Dickens", "Leo Tolstoy"],
          correctAnswer: "William Shakespeare"
        },
        {
          question: "What is the chemical symbol for water?",
          options: ["H2O", "CO2", "NaCl", "O2"],
          correctAnswer: "H2O"
        }
      ];

      function displayQuestions() {
        const questionsList = document.getElementById('questionsList');
        questionsList.innerHTML = '';
        questions.forEach((q, index) => {
          const questionItem = document.createElement('li');
          questionItem.innerHTML = `
            <h3>${q.question}</h3>
            <div>
              ${q.options.map((opt, i) => `
                <input type="radio" id="q${index}option${i}" name="question${index}" value="${opt}">
                <label for="q${index}option${i}">${opt}</label>
              `).join('')}
            </div>
          `;
          questionsList.appendChild(questionItem);
        });
      }

      function saveProgress() {
        const answers = Array.from(document.querySelectorAll('input[type="radio"]:checked')).reduce((acc, input) => {
          const questionIndex = parseInt(input.name.replace('question', ''));
          acc[questionIndex] = input.value;
          return acc;
        }, {});
        sessionStorage.setItem('progress', JSON.stringify(answers));
      }

      function calculateScore() {
        const userAnswers = Array.from(document.querySelectorAll('input[type="radio"]:checked')).reduce((acc, input) => {
          acc[input.name] = input.value;
          return acc;
        }, {});

        let score = 0;
        questions.forEach((q, index) => {
          const userAnswer = userAnswers[`question${index}`];
          if (userAnswer === q.correctAnswer) {
            score++;
          }
        });

        document.getElementById('score').textContent = `Your score is ${score} out of 5.`;
        localStorage.setItem('score', score);
      }

      document.getElementById('quizForm').addEventListener('submit', function(event) {
        event.preventDefault();
        calculateScore();
      });

      document.getElementById('quizForm').addEventListener('change', saveProgress);

      // Call function to display questions
      displayQuestions();

      const savedProgress = sessionStorage.getItem('progress');
      if (savedProgress) {
        const progress = JSON.parse(savedProgress);
        for (let index in progress) {
          const answer = progress[index];
          const input = document.querySelector(`input[name="question${index}"][value="${answer}"]`);
          if (input) {
            input.checked = true;
          }
        }
      }
    });
  </script>
</body>
</html>
